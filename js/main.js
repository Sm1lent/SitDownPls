"use strict";var _Swiper;function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var body=document.body,container=document.querySelector(".container"),burger=document.querySelector(".burger"),nav=document.querySelector(".header__menu-wrap"),header=document.querySelector(".header"),choicesLocation=document.querySelector("#choices-location"),categoriesBtn=document.querySelector(".categories__control"),categoriesDropdown=document.querySelector(".categories__dropdown"),categoriesList=document.querySelector(".categories__list"),mailUsSection=document.querySelector(".mail-us"),modalContainer=document.querySelector(".modal-container"),successModal=document.querySelector(".thank-you-message");function blockScroll(){var e=window.innerWidth-body.offsetWidth+"px";body.style.paddingRight=e,body.classList.add("overlay")}function unblockScroll(){body.classList.remove("overlay"),body.removeAttribute("style")}var anchors=document.querySelectorAll('a[href*="#"]');anchors.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var s=e.getAttribute("href").substring(1),i=document.getElementById(s);i&&i.scrollIntoView({behavior:"smooth",block:"start"})}))}));var choices1=new Choices(choicesLocation,{searchEnabled:!1,shouldSort:!1});function dropdownAct(e,t){e.classList.toggle("is-active"),e.classList.contains("is-active")?showDropdown(t):hideDropdown(t)}function showDropdown(e){e.classList.add("is-opened"),e.style.maxHeight=e.scrollHeight+"px"}function hideDropdown(e){e.removeAttribute("style"),setTimeout((function(){e.classList.remove("is-opened")}),350)}categoriesBtn.addEventListener("click",(function(){categoriesBtn.classList.toggle("is-active"),categoriesBtn.classList.contains("is-active")?(showDropdown(categoriesDropdown),body.addEventListener("click",dropdownListener)):hideDropdown(categoriesDropdown)}));var dropdownListener=function e(t){t.target!=categoriesList&&t.target!=categoriesBtn&&(hideDropdown(categoriesDropdown),categoriesBtn.classList.remove("is-active"),body.removeEventListener("click",e))},heroSwiper=new Swiper(".hero-swiper",(_defineProperty(_Swiper={direction:"horizontal",watchSlidesProgress:!0,slidesPerView:1,spaceBetween:10,keyboard:!0,autoplay:!0},"autoplay",{disableOnInteraction:!1}),_defineProperty(_Swiper,"watchSlidesProgress",!0),_defineProperty(_Swiper,"watchSlidesVisibility",!0),_defineProperty(_Swiper,"slideVisibleClass","slide-visible"),_defineProperty(_Swiper,"on",{init:function(){this.slides.forEach((function(e){var t=e.querySelector(".btn");e.classList.contains("slide-visible")?t.tabIndex="":t.tabIndex="-1"}))},slideChange:function(){this.slides.forEach((function(e){var t=e.querySelector(".btn");e.classList.contains("slide-visible")?t.tabIndex="":t.tabIndex="-1"}))}}),_Swiper));heroSwiper.on("activeIndexChange",runDisplayProgress(3100));var heroPagBtns=document.querySelectorAll(".progressbar-block__bullet");heroPagBtns.forEach((function(e){var t=e.dataset.index;e.addEventListener("click",(function(){heroSwiper.slideTo(t,300)}))}));var specSwiper=new Swiper(".special-swiper",{slidesPerView:"auto",navigation:{nextEl:".special__swiper-button-next",prevEl:".special__swiper-button-prev"},breakpoints:{584:{slidesPerGroup:2},1e3:{slidesPerGroup:3}},a11y:{prevSlideMessage:"Предыдущие слайды",nextSlideMessage:"Следующие слайды"},keyboard:!0,watchSlidesProgress:!0,watchSlidesVisibility:!0,slideVisibleClass:"slide-visible",on:{init:function(){this.slides.forEach((function(e){var t=e.querySelector(".btn");e.classList.contains("slide-visible")?t.tabIndex="":t.tabIndex="-1"}))},slideChange:function(){this.slides.forEach((function(e){var t=e.querySelector(".btn");e.classList.contains("slide-visible")?t.tabIndex="":t.tabIndex="-1"}))}}}),usefulSwiper=new Swiper(".useful-swiper",{direction:"horizontal",slidesPerView:1,slidesPerGroup:1,spaceBetween:12,slideClass:"useful-swiper__slide",navigation:{nextEl:".useful__swiper-button-next",prevEl:".useful__swiper-button-prev"},breakpoints:{581:{slidesPerView:2,slidesPerGroup:2,spaceBetween:32},1024:{slidesPerView:3,slidesPerGroup:3,spaceBetween:32},1230:{slidesPerView:2,slidesPerGroup:2,spaceBetween:32}},a11y:{prevSlideMessage:"Предыдущие слайды",nextSlideMessage:"Следующие слайды"},keyboard:!0,watchSlidesProgress:!0,watchSlidesVisibility:!0,slideVisibleClass:"slide-visible",on:{init:function(){this.slides.forEach((function(e){var t=e.querySelector(".btn");e.classList.contains("slide-visible")?t.tabIndex="":t.tabIndex="-1"}))},slideChange:function(){this.slides.forEach((function(e){var t=e.querySelector(".btn");e.classList.contains("slide-visible")?t.tabIndex="":t.tabIndex="-1"}))}}}),pseudo=document.querySelector(":root");function calcStripe(){pseudo.removeAttribute("style");var e=(container.offsetWidth-body.offsetWidth)/2;pseudo.style.setProperty("--stripe-shift","".concat(e,"px")),pseudo.style.setProperty("--stripe-width","".concat(body.offsetWidth,"px"))}calcStripe();var goodsCards=document.querySelectorAll(".rated__list-item"),rateBtn=document.querySelector(".rated__btn"),pageWidth=body.offsetWidth,goodsNumber=pageWidth<1200?6:8,actualgoodsNumber=goodsNumber;function switchCards(e){if(8==e)for(var t=6;t<8;t++)goodsCards[t].classList.contains("hidden")&&displayBlock(goodsCards[t]);for(var s=e;s<=goodsCards.length;s++)goodsCards[s]&&(goodsCards[s].classList.contains("hidden")||removeBlock(goodsCards[s]))}function displayBlock(e){e.classList.remove("hidden")}function removeBlock(e){e.classList.add("hidden")}switchCards(actualgoodsNumber),burger.addEventListener("click",(function(){dropdownAct(burger,nav)})),nav.addEventListener("click",(function(e){(e.target.classList.contains("menu__link")||e.target.classList.contains("sec-menu__link"))&&burger.classList.contains("is-active")&&dropdownAct(burger,nav)})),window.addEventListener("resize",(function(){calcStripe(),pageWidth=body.offsetWidth,rateBtn.classList.contains("hidden")||(goodsNumber=pageWidth<1200?6:8)!=actualgoodsNumber&&switchCards(actualgoodsNumber=goodsNumber),window.innerWidth>1e3&&nav.classList.contains("is-active")&&(toggleBurgerAndMenu(),resetHeader())}));var btnShowMoreListener=function e(){for(var t=1;t<5;t++){var s=document.querySelector(".rated__list-item.hidden");s?displayBlock(s):(rateBtn.removeEventListener("click",e),removeBlock(rateBtn))}};rateBtn.addEventListener("click",btnShowMoreListener);var tippyBtn=document.querySelector(".mail-us__tip-btn"),tippyMessage=document.querySelector("#tippy-1");tippyBtn.addEventListener("click",(function(){tippyBtn.classList.toggle("is-active")})),tippy(".mail-us__tip-btn",{trigger:"click",maxWidth:157,content:"Реплицированные с зарубежных источников, исследования формируют глобальную сеть."});var validLettersRu=/^[А-Яа-я]+$/,validLettersEn=/^[A-Za-z]+$/,form=document.querySelector(".mail-us-form"),phoneInput=document.querySelector("#phone"),nameInput=document.querySelector("#name");Inputmask("+7(999)-999-99-99").mask(phoneInput);var validation=new window.JustValidate(form,{focusInvalidField:!0,successFieldCssClass:"valid-field",errorFieldCssClass:"invalid-field",errorLabelStyle:{color:"#FF6972"}}),successModalListener=function e(t){(t.target.classList.contains("close-btn")||t.target.classList.contains("modal"))&&(unblockScroll(),modalContainer.classList.remove("modal"),successModal.classList.remove("is-shown"),body.removeEventListener("click",e))};function runDisplayProgress(e){var t=heroSwiper.activeIndex,s=document.querySelector('[data-index="'.concat(t,'"]')).querySelector(".progressbar-block__progress"),i=s.getAttribute("r"),r=2*Math.PI*i,o=null;window.requestAnimationFrame((function i(n){o||(o=n);var a=n-o,c=heroSwiper.activeIndex,d=Math.floor(a/e*100);s.setAttribute("stroke-dasharray",r),s.setAttribute("stroke-dashoffset",r-r*d/100),a<e&&t===c?window.requestAnimationFrame(i):(d=0,s.setAttribute("stroke-dasharray",r),s.setAttribute("stroke-dashoffset",r-r*d/100),runDisplayProgress(3300))}))}validation.addField("#name",[{rule:"minLength",value:3,errorMessage:"Введите минимум 3 символа"},{rule:"maxLength",value:25,errorMessage:"Введите не более 25 символов"},{rule:"required",value:!0,errorMessage:"Как вас зовут?"},{rule:"function",validator:function(){var e=nameInput.value;return!(!e.match(validLettersRu)&&!e.match(validLettersEn))},errorMessage:"Допустимы только буквы кириллицы или латыни"}]).addField("#email",[{rule:"required",value:!0,errorMessage:"Укажите вашу почту"},{rule:"email",value:!0,errorMessage:"Введите корректный e-mail"}]).addField("#phone",[{rule:"required",value:!0,errorMessage:"Укажите ваш телефон"},{rule:"function",validator:function(){return 10===phoneInput.inputmask.unmaskedvalue().length},errorMessage:"Введите корректный телефон"}]).addField("#check",[{rule:"required",value:!0,errorMessage:"Необходимо подтвердить"}]).onSuccess((function(e){console.log("Validation passes and form submitted");var t=new FormData(e.target);console.log(t);var s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&200===s.status&&(blockScroll(),modalContainer.classList.add("modal"),successModal.classList.add("is-shown"),body.addEventListener("click",successModalListener))},s.open("POST","mail.php",!0),s.send(t),e.target.reset()})),mailUsSection.addEventListener("click",(function(e){e.target!=tippyBtn&&tippyBtn.classList.contains("is-active")&&!tippyMessage&&tippyBtn.classList.remove("is-active")}));