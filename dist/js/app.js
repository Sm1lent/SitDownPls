"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t;t=function(){function e(e){var t=!0,n=!1,o=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function s(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function r(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function d(e){t=!1}function c(){document.addEventListener("mousemove",a),document.addEventListener("mousedown",a),document.addEventListener("mouseup",a),document.addEventListener("pointermove",a),document.addEventListener("pointerdown",a),document.addEventListener("pointerup",a),document.addEventListener("touchmove",a),document.addEventListener("touchstart",a),document.addEventListener("touchend",a)}function a(e){e.target.nodeName&&"html"===e.target.nodeName.toLowerCase()||(t=!1,document.removeEventListener("mousemove",a),document.removeEventListener("mousedown",a),document.removeEventListener("mouseup",a),document.removeEventListener("pointermove",a),document.removeEventListener("pointerdown",a),document.removeEventListener("pointerup",a),document.removeEventListener("touchmove",a),document.removeEventListener("touchstart",a),document.removeEventListener("touchend",a))}document.addEventListener("keydown",(function(n){n.metaKey||n.altKey||n.ctrlKey||(s(e.activeElement)&&r(e.activeElement),t=!0)}),!0),document.addEventListener("mousedown",d,!0),document.addEventListener("pointerdown",d,!0),document.addEventListener("touchstart",d,!0),document.addEventListener("visibilitychange",(function(e){"hidden"===document.visibilityState&&(n&&(t=!0),c())}),!0),c(),e.addEventListener("focus",(function(e){var n,o,d;s(e.target)&&(t||(n=e.target,o=n.type,"INPUT"===(d=n.tagName)&&i[o]&&!n.readOnly||"TEXTAREA"===d&&!n.readOnly||n.isContentEditable))&&r(e.target)}),!0),e.addEventListener("blur",(function(e){var t;s(e.target)&&(e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(n=!0,window.clearTimeout(o),o=window.setTimeout((function(){n=!1}),100),(t=e.target).hasAttribute("data-focus-visible-added")&&(t.classList.remove("focus-visible"),t.removeAttribute("data-focus-visible-added")))}),!0),e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host?e.host.setAttribute("data-js-focus-visible",""):e.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var t;window.applyFocusVisiblePolyfill=e;try{t=new CustomEvent("focus-visible-polyfill-ready")}catch(e){(t=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(t)}"undefined"!=typeof document&&e(document)},"object"===("undefined"==typeof exports?"undefined":e(exports))&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t();var n=document.body,o=document.querySelector(".container"),i=document.querySelector("#choices-location");document.querySelector("#choices-data"),document.querySelector("#choices-categories");document.querySelectorAll('a[href*="#"]').forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=e.getAttribute("href").substring(1);document.getElementById(n).scrollIntoView({behavior:"smooth",block:"start"})}))}));new Choices(i,{searchEnabled:!1,shouldSort:!1});var s=document.querySelector(".categories__control"),r=document.querySelector(".categories__dropdown");s.addEventListener("click",(function(){s.classList.toggle("is-active"),s.classList.contains("is-active")?(r.classList.add("is-opened"),r.style.maxHeight=r.scrollHeight+"px"):(r.removeAttribute("style"),setTimeout((function(){r.classList.remove("is-opened")}),450))}));new Swiper(".hero-swiper",{direction:"horizontal",slidesPerView:1,loop:!0,spaceBetween:10,pagination:{el:".hero-swiper__pagination",type:"bullets",clickable:!0},a11y:{prevSlideMessage:"Предыдущий слайд",nextSlideMessage:"Следующий слайд"},keyboard:!0}),new Swiper(".special-swiper",{slidesPerView:"auto",slidesPerGroup:3,navigation:{nextEl:".special__swiper-button-next",prevEl:".special__swiper-button-prev"},a11y:{prevSlideMessage:"Предыдущие слайды",nextSlideMessage:"Следующие слайды"},keyboard:!0}),new Swiper(".useful-swiper",{direction:"horizontal",slidesPerView:2,slidesPerGroup:2,spaceBetween:32,slideClass:"useful-swiper__slide",navigation:{nextEl:".useful__swiper-button-next",prevEl:".useful__swiper-button-prev"},a11y:{prevSlideMessage:"Предыдущие слайды",nextSlideMessage:"Следующие слайды"},keyboard:!0});var d=document.querySelector(".header__sec-menu");function c(){d.removeAttribute("style");var e=(o.offsetWidth-n.offsetWidth)/2;d.style.setProperty("--stripe-shift","".concat(e,"px")),d.style.setProperty("--stripe-width","".concat(n.offsetWidth,"px"))}c();var a=document.querySelectorAll(".rated__list-item"),u=document.querySelector(".rated__btn"),l=n.offsetWidth,m=l<1200?6:8,v=m;function f(e){if(8==e)for(var t=6;t<8;t++)a[t].classList.contains("hidden")&&p(a[t]);for(var n=e;n<=a.length;n++)a[n]&&(a[n].classList.contains("hidden")||y(a[n]))}function p(e){e.classList.remove("hidden")}function y(e){e.classList.add("hidden")}f(v),window.addEventListener("resize",(function(){c(),l=n.offsetWidth,console.log(l),u.classList.contains("hidden")||(m=l<1200?6:8)!=v&&f(v=m)}));u.addEventListener("click",(function e(){for(var t=1;t<5;t++){var n=document.querySelector(".rated__list-item.hidden");n?p(n):(u.removeEventListener("click",e),y(u))}}));var h=document.querySelector(".mail-us__tip-btn");h.addEventListener("click",(function(){h.classList.toggle("is-active")})),tippy(".mail-us__tip-btn",{trigger:"click",maxWidth:157,content:"Реплицированные с зарубежных источников, исследования формируют глобальную сеть."}),Inputmask("+7(999)-999-99-99").mask(document.querySelector("#phone"));var E=/^[А-Яа-я]+$/,b=/^[A-Za-z]+$/,L=document.querySelector("#phone"),w=document.querySelector("#name");new JustValidate(".mail-us-form",{colorValid:"#B8EC64",colorWrong:"#FF6972",rules:{name:{required:!0,minLength:3,maxLength:25,function:function(){var e=w.value;return e.match(E)||e.match(b)}},phone:{required:!0,function:function(e,t){var n=L.inputmask.unmaskedvalue();return Number(n)&&10===n.length}},email:{required:!0,email:email},check:{required:!0}},messages:{name:{required:"Как вас зовут?",minLength:"Введите минимум 3 символа",maxLength:"Введите не более 25 символов",function:"Допустимы только буквы кириллицы или латыни"},phone:{required:"Укажите ваш телефон",function:"Введите номер в десятизначном формате"},email:{required:"Укажите вашу почту",email:"Неверный формат"},check:{required:"Необходимо подтвердить"}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvY3VzLXZpc2libGUuanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbImZhY3RvcnkiLCJhcHBseUZvY3VzVmlzaWJsZVBvbHlmaWxsIiwic2NvcGUiLCJoYWRLZXlib2FyZEV2ZW50IiwiaGFkRm9jdXNWaXNpYmxlUmVjZW50bHkiLCJoYWRGb2N1c1Zpc2libGVSZWNlbnRseVRpbWVvdXQiLCJpbnB1dFR5cGVzV2hpdGVsaXN0IiwidGV4dCIsInNlYXJjaCIsInVybCIsInRlbCIsImVtYWlsIiwicGFzc3dvcmQiLCJudW1iZXIiLCJkYXRlIiwibW9udGgiLCJ3ZWVrIiwidGltZSIsImRhdGV0aW1lIiwiaXNWYWxpZEZvY3VzVGFyZ2V0IiwiZWwiLCJkb2N1bWVudCIsIm5vZGVOYW1lIiwiY2xhc3NMaXN0IiwiYWRkRm9jdXNWaXNpYmxlQ2xhc3MiLCJjb250YWlucyIsImFkZCIsInNldEF0dHJpYnV0ZSIsIm9uUG9pbnRlckRvd24iLCJlIiwiYWRkSW5pdGlhbFBvaW50ZXJNb3ZlTGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uSW5pdGlhbFBvaW50ZXJNb3ZlIiwidGFyZ2V0IiwidG9Mb3dlckNhc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibWV0YUtleSIsImFsdEtleSIsImN0cmxLZXkiLCJhY3RpdmVFbGVtZW50IiwidmlzaWJpbGl0eVN0YXRlIiwidHlwZSIsInRhZ05hbWUiLCJyZWFkT25seSIsImlzQ29udGVudEVkaXRhYmxlIiwiaGFzQXR0cmlidXRlIiwid2luZG93IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInJlbW92ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIm5vZGVUeXBlIiwiTm9kZSIsIkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUiLCJob3N0IiwiRE9DVU1FTlRfTk9ERSIsImRvY3VtZW50RWxlbWVudCIsImV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJlcnJvciIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImV4cG9ydHMiLCJfdHlwZW9mIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwiYm9keSIsImNvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJjaG9pY2VzTG9jYXRpb24iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFuY2hvciIsInByZXZlbnREZWZhdWx0IiwiYm9sY2tJZCIsImdldEF0dHJpYnV0ZSIsInN1YnN0cmluZyIsImdldEVsZW1lbnRCeUlkIiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsImJsb2NrIiwiQ2hvaWNlcyIsInNlYXJjaEVuYWJsZWQiLCJzaG91bGRTb3J0IiwiY2F0ZWdvcmllc0J0biIsImNhdGVnb3JpZXNEcm9wZG93biIsInRvZ2dsZSIsInN0eWxlIiwibWF4SGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiU3dpcGVyIiwiZGlyZWN0aW9uIiwic2xpZGVzUGVyVmlldyIsImxvb3AiLCJzcGFjZUJldHdlZW4iLCJwYWdpbmF0aW9uIiwiY2xpY2thYmxlIiwiYTExeSIsInByZXZTbGlkZU1lc3NhZ2UiLCJuZXh0U2xpZGVNZXNzYWdlIiwia2V5Ym9hcmQiLCJzbGlkZXNQZXJHcm91cCIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJzbGlkZUNsYXNzIiwicHNldWRvIiwiY2FsY1N0cmlwZSIsInN0cmlwZVNoaWZ0Iiwib2Zmc2V0V2lkdGgiLCJzZXRQcm9wZXJ0eSIsImNvbmNhdCIsImdvb2RzQ2FyZHMiLCJyYXRlQnRuIiwicGFnZVdpZHRoIiwiZ29vZHNOdW1iZXIiLCJhY3R1YWxnb29kc051bWJlciIsInN3aXRjaENhcmRzIiwid2FudGVkTnVtIiwiaSIsImRpc3BsYXlCbG9jayIsImxlbmd0aCIsInJlbW92ZUJsb2NrIiwiY29uc29sZSIsImxvZyIsImJ0blNob3dNb3JlTGlzdGVuZXIiLCJjYXJkVG9TaG93IiwidGlwcHlCdG4iLCJ0aXBweSIsInRyaWdnZXIiLCJtYXhXaWR0aCIsImNvbnRlbnQiLCJJbnB1dG1hc2siLCJtYXNrIiwidmFsaWRMZXR0ZXJzUnUiLCJ2YWxpZExldHRlcnNFbiIsInBob25lSW5wdXQiLCJuYW1lSW5wdXQiLCJKdXN0VmFsaWRhdGUiLCJjb2xvclZhbGlkIiwiY29sb3JXcm9uZyIsInJ1bGVzIiwibmFtZSIsInJlcXVpcmVkIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwiZnVuY3Rpb24iLCJ1c2VyTmFtZSIsInZhbHVlIiwibWF0Y2giLCJwaG9uZSIsImlucHV0bWFzayIsInVubWFza2VkdmFsdWUiLCJOdW1iZXIiLCJjaGVjayIsIm1lc3NhZ2VzIl0sIm1hcHBpbmdzIjoibVBBQUMsSUFBa0JBLEVBQUFBLEVBSVYsV0FTUCxTQUFTQyxFQUEwQkMsR0FDakMsSUFBSUMsR0FBbUIsRUFDbkJDLEdBQTBCLEVBQzFCQyxFQUFpQyxLQUVqQ0MsRUFBc0IsQ0FDeEJDLE1BQU0sRUFDTkMsUUFBUSxFQUNSQyxLQUFLLEVBQ0xDLEtBQUssRUFDTEMsT0FBTyxFQUNQQyxVQUFVLEVBQ1ZDLFFBQVEsRUFDUkMsTUFBTSxFQUNOQyxPQUFPLEVBQ1BDLE1BQU0sRUFDTkMsTUFBTSxFQUNOQyxVQUFVLEVBQ1Ysa0JBQWtCLEdBUXBCLFNBQVNDLEVBQW1CQyxHQUMxQixTQUNFQSxHQUNBQSxJQUFPQyxVQUNTLFNBQWhCRCxFQUFHRSxVQUNhLFNBQWhCRixFQUFHRSxVQUNILGNBQWVGLEdBQ2YsYUFBY0EsRUFBR0csV0FzQ3JCLFNBQVNDLEVBQXFCSixHQUN4QkEsRUFBR0csVUFBVUUsU0FBUyxtQkFHMUJMLEVBQUdHLFVBQVVHLElBQUksaUJBQ2pCTixFQUFHTyxhQUFhLDJCQUE0QixLQTRDOUMsU0FBU0MsRUFBY0MsR0FDckIxQixHQUFtQixFQXVFckIsU0FBUzJCLElBQ1BULFNBQVNVLGlCQUFpQixZQUFhQyxHQUN2Q1gsU0FBU1UsaUJBQWlCLFlBQWFDLEdBQ3ZDWCxTQUFTVSxpQkFBaUIsVUFBV0MsR0FDckNYLFNBQVNVLGlCQUFpQixjQUFlQyxHQUN6Q1gsU0FBU1UsaUJBQWlCLGNBQWVDLEdBQ3pDWCxT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SSxVQUFVLEVBQ1Z0SSxNQUFBQSxPQUVGaUosTUFBTyxDQUNMWCxVQUFVLElBR2RZLFNBQVUsQ0FDUmIsS0FBTSxDQUNKQyxTQUFVLGlCQUNWQyxVQUFXLDRCQUNYQyxVQUFXLCtCQUNYQyxTQUFVLCtDQUVaSSxNQUFPLENBQ0xQLFNBQVUsc0JBQ1ZHLFNBQVUseUNBRVp6SSxNQUFPLENBQ0xzSSxTQUFVLHFCQUNWdEksTUFBTyxtQkFFVGlKLE1BQU8sQ0FDTFgsU0FBVSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAoZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAgKiBBcHBsaWVzIHRoZSA6Zm9jdXMtdmlzaWJsZSBwb2x5ZmlsbCBhdCB0aGUgZ2l2ZW4gc2NvcGUuXG4gICAqIEEgc2NvcGUgaW4gdGhpcyBjYXNlIGlzIGVpdGhlciB0aGUgdG9wLWxldmVsIERvY3VtZW50IG9yIGEgU2hhZG93IFJvb3QuXG4gICAqXG4gICAqIEBwYXJhbSB7KERvY3VtZW50fFNoYWRvd1Jvb3QpfSBzY29wZVxuICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL2ZvY3VzLXZpc2libGVcbiAgICovXG4gIGZ1bmN0aW9uIGFwcGx5Rm9jdXNWaXNpYmxlUG9seWZpbGwoc2NvcGUpIHtcbiAgICB2YXIgaGFkS2V5Ym9hcmRFdmVudCA9IHRydWU7XG4gICAgdmFyIGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5ID0gZmFsc2U7XG4gICAgdmFyIGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5VGltZW91dCA9IG51bGw7XG5cbiAgICB2YXIgaW5wdXRUeXBlc1doaXRlbGlzdCA9IHtcbiAgICAgIHRleHQ6IHRydWUsXG4gICAgICBzZWFyY2g6IHRydWUsXG4gICAgICB1cmw6IHRydWUsXG4gICAgICB0ZWw6IHRydWUsXG4gICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgIHBhc3N3b3JkOiB0cnVlLFxuICAgICAgbnVtYmVyOiB0cnVlLFxuICAgICAgZGF0ZTogdHJ1ZSxcbiAgICAgIG1vbnRoOiB0cnVlLFxuICAgICAgd2VlazogdHJ1ZSxcbiAgICAgIHRpbWU6IHRydWUsXG4gICAgICBkYXRldGltZTogdHJ1ZSxcbiAgICAgICdkYXRldGltZS1sb2NhbCc6IHRydWVcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBsZWdhY3kgYnJvd3NlcnMgYW5kIGlmcmFtZXMgd2hpY2ggc29tZXRpbWVzIGZvY3VzXG4gICAgICogZWxlbWVudHMgbGlrZSBkb2N1bWVudCwgYm9keSwgYW5kIG5vbi1pbnRlcmFjdGl2ZSBTVkcuXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzVmFsaWRGb2N1c1RhcmdldChlbCkge1xuICAgICAgaWYgKFxuICAgICAgICBlbCAmJlxuICAgICAgICBlbCAhPT0gZG9jdW1lbnQgJiZcbiAgICAgICAgZWwubm9kZU5hbWUgIT09ICdIVE1MJyAmJlxuICAgICAgICBlbC5ub2RlTmFtZSAhPT0gJ0JPRFknICYmXG4gICAgICAgICdjbGFzc0xpc3QnIGluIGVsICYmXG4gICAgICAgICdjb250YWlucycgaW4gZWwuY2xhc3NMaXN0XG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgd2hldGhlciB0aGUgZ2l2ZW4gZWxlbWVudCBzaG91bGQgYXV0b21hdGljYWxseSB0cmlnZ2VyIHRoZVxuICAgICAqIGBmb2N1cy12aXNpYmxlYCBjbGFzcyBiZWluZyBhZGRlZCwgaS5lLiB3aGV0aGVyIGl0IHNob3VsZCBhbHdheXMgbWF0Y2hcbiAgICAgKiBgOmZvY3VzLXZpc2libGVgIHdoZW4gZm9jdXNlZC5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb2N1c1RyaWdnZXJzS2V5Ym9hcmRNb2RhbGl0eShlbCkge1xuICAgICAgdmFyIHR5cGUgPSBlbC50eXBlO1xuICAgICAgdmFyIHRhZ05hbWUgPSBlbC50YWdOYW1lO1xuXG4gICAgICBpZiAodGFnTmFtZSA9PT0gJ0lOUFVUJyAmJiBpbnB1dFR5cGVzV2hpdGVsaXN0W3R5cGVdICYmICFlbC5yZWFkT25seSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRhZ05hbWUgPT09ICdURVhUQVJFQScgJiYgIWVsLnJlYWRPbmx5KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZWwuaXNDb250ZW50RWRpdGFibGUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGBmb2N1cy12aXNpYmxlYCBjbGFzcyB0byB0aGUgZ2l2ZW4gZWxlbWVudCBpZiBpdCB3YXMgbm90IGFkZGVkIGJ5XG4gICAgICogdGhlIGF1dGhvci5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkRm9jdXNWaXNpYmxlQ2xhc3MoZWwpIHtcbiAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZvY3VzLXZpc2libGUnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKCdmb2N1cy12aXNpYmxlJyk7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZm9jdXMtdmlzaWJsZS1hZGRlZCcsICcnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGBmb2N1cy12aXNpYmxlYCBjbGFzcyBmcm9tIHRoZSBnaXZlbiBlbGVtZW50IGlmIGl0IHdhcyBub3RcbiAgICAgKiBvcmlnaW5hbGx5IGFkZGVkIGJ5IHRoZSBhdXRob3IuXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZUZvY3VzVmlzaWJsZUNsYXNzKGVsKSB7XG4gICAgICBpZiAoIWVsLmhhc0F0dHJpYnV0ZSgnZGF0YS1mb2N1cy12aXNpYmxlLWFkZGVkJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXMtdmlzaWJsZScpO1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWZvY3VzLXZpc2libGUtYWRkZWQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgbW9zdCByZWNlbnQgdXNlciBpbnRlcmFjdGlvbiB3YXMgdmlhIHRoZSBrZXlib2FyZDtcbiAgICAgKiBhbmQgdGhlIGtleSBwcmVzcyBkaWQgbm90IGluY2x1ZGUgYSBtZXRhLCBhbHQvb3B0aW9uLCBvciBjb250cm9sIGtleTtcbiAgICAgKiB0aGVuIHRoZSBtb2RhbGl0eSBpcyBrZXlib2FyZC4gT3RoZXJ3aXNlLCB0aGUgbW9kYWxpdHkgaXMgbm90IGtleWJvYXJkLlxuICAgICAqIEFwcGx5IGBmb2N1cy12aXNpYmxlYCB0byBhbnkgY3VycmVudCBhY3RpdmUgZWxlbWVudCBhbmQga2VlcCB0cmFja1xuICAgICAqIG9mIG91ciBrZXlib2FyZCBtb2RhbGl0eSBzdGF0ZSB3aXRoIGBoYWRLZXlib2FyZEV2ZW50YC5cbiAgICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgICAgaWYgKGUubWV0YUtleSB8fCBlLmFsdEtleSB8fCBlLmN0cmxLZXkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNWYWxpZEZvY3VzVGFyZ2V0KHNjb3BlLmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICAgIGFkZEZvY3VzVmlzaWJsZUNsYXNzKHNjb3BlLmFjdGl2ZUVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBoYWRLZXlib2FyZEV2ZW50ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiBhdCBhbnkgcG9pbnQgYSB1c2VyIGNsaWNrcyB3aXRoIGEgcG9pbnRpbmcgZGV2aWNlLCBlbnN1cmUgdGhhdCB3ZSBjaGFuZ2VcbiAgICAgKiB0aGUgbW9kYWxpdHkgYXdheSBmcm9tIGtleWJvYXJkLlxuICAgICAqIFRoaXMgYXZvaWRzIHRoZSBzaXR1YXRpb24gd2hlcmUgYSB1c2VyIHByZXNzZXMgYSBrZXkgb24gYW4gYWxyZWFkeSBmb2N1c2VkXG4gICAgICogZWxlbWVudCwgYW5kIHRoZW4gY2xpY2tzIG9uIGEgZGlmZmVyZW50IGVsZW1lbnQsIGZvY3VzaW5nIGl0IHdpdGggYVxuICAgICAqIHBvaW50aW5nIGRldmljZSwgd2hpbGUgd2Ugc3RpbGwgdGhpbmsgd2UncmUgaW4ga2V5Ym9hcmQgbW9kYWxpdHkuXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uUG9pbnRlckRvd24oZSkge1xuICAgICAgaGFkS2V5Ym9hcmRFdmVudCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9uIGBmb2N1c2AsIGFkZCB0aGUgYGZvY3VzLXZpc2libGVgIGNsYXNzIHRvIHRoZSB0YXJnZXQgaWY6XG4gICAgICogLSB0aGUgdGFyZ2V0IHJlY2VpdmVkIGZvY3VzIGFzIGEgcmVzdWx0IG9mIGtleWJvYXJkIG5hdmlnYXRpb24sIG9yXG4gICAgICogLSB0aGUgZXZlbnQgdGFyZ2V0IGlzIGFuIGVsZW1lbnQgdGhhdCB3aWxsIGxpa2VseSByZXF1aXJlIGludGVyYWN0aW9uXG4gICAgICogICB2aWEgdGhlIGtleWJvYXJkIChlLmcuIGEgdGV4dCBib3gpXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uRm9jdXMoZSkge1xuICAgICAgLy8gUHJldmVudCBJRSBmcm9tIGZvY3VzaW5nIHRoZSBkb2N1bWVudCBvciBIVE1MIGVsZW1lbnQuXG4gICAgICBpZiAoIWlzVmFsaWRGb2N1c1RhcmdldChlLnRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaGFkS2V5Ym9hcmRFdmVudCB8fCBmb2N1c1RyaWdnZXJzS2V5Ym9hcmRNb2RhbGl0eShlLnRhcmdldCkpIHtcbiAgICAgICAgYWRkRm9jdXNWaXNpYmxlQ2xhc3MoZS50YXJnZXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9uIGBibHVyYCwgcmVtb3ZlIHRoZSBgZm9jdXMtdmlzaWJsZWAgY2xhc3MgZnJvbSB0aGUgdGFyZ2V0LlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbkJsdXIoZSkge1xuICAgICAgaWYgKCFpc1ZhbGlkRm9jdXNUYXJnZXQoZS50YXJnZXQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZvY3VzLXZpc2libGUnKSB8fFxuICAgICAgICBlLnRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEtZm9jdXMtdmlzaWJsZS1hZGRlZCcpXG4gICAgICApIHtcbiAgICAgICAgLy8gVG8gZGV0ZWN0IGEgdGFiL3dpbmRvdyBzd2l0Y2gsIHdlIGxvb2sgZm9yIGEgYmx1ciBldmVudCBmb2xsb3dlZFxuICAgICAgICAvLyByYXBpZGx5IGJ5IGEgdmlzaWJpbGl0eSBjaGFuZ2UuXG4gICAgICAgIC8vIElmIHdlIGRvbid0IHNlZSBhIHZpc2liaWxpdHkgY2hhbmdlIHdpdGhpbiAxMDBtcywgaXQncyBwcm9iYWJseSBhXG4gICAgICAgIC8vIHJlZ3VsYXIgZm9jdXMgY2hhbmdlLlxuICAgICAgICBoYWRGb2N1c1Zpc2libGVSZWNlbnRseSA9IHRydWU7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoaGFkRm9jdXNWaXNpYmxlUmVjZW50bHlUaW1lb3V0KTtcbiAgICAgICAgaGFkRm9jdXNWaXNpYmxlUmVjZW50bHlUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaGFkRm9jdXNWaXNpYmxlUmVjZW50bHkgPSBmYWxzZTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgcmVtb3ZlRm9jdXNWaXNpYmxlQ2xhc3MoZS50YXJnZXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIHRoZSB1c2VyIGNoYW5nZXMgdGFicywga2VlcCB0cmFjayBvZiB3aGV0aGVyIG9yIG5vdCB0aGUgcHJldmlvdXNseVxuICAgICAqIGZvY3VzZWQgZWxlbWVudCBoYWQgLmZvY3VzLXZpc2libGUuXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uVmlzaWJpbGl0eUNoYW5nZShlKSB7XG4gICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAnaGlkZGVuJykge1xuICAgICAgICAvLyBJZiB0aGUgdGFiIGJlY29tZXMgYWN0aXZlIGFnYWluLCB0aGUgYnJvd3NlciB3aWxsIGhhbmRsZSBjYWxsaW5nIGZvY3VzXG4gICAgICAgIC8vIG9uIHRoZSBlbGVtZW50IChTYWZhcmkgYWN0dWFsbHkgY2FsbHMgaXQgdHdpY2UpLlxuICAgICAgICAvLyBJZiB0aGlzIHRhYiBjaGFuZ2UgY2F1c2VkIGEgYmx1ciBvbiBhbiBlbGVtZW50IHdpdGggZm9jdXMtdmlzaWJsZSxcbiAgICAgICAgLy8gcmUtYXBwbHkgdGhlIGNsYXNzIHdoZW4gdGhlIHVzZXIgc3dpdGNoZXMgYmFjayB0byB0aGUgdGFiLlxuICAgICAgICBpZiAoaGFkRm9jdXNWaXNpYmxlUmVjZW50bHkpIHtcbiAgICAgICAgICBoYWRLZXlib2FyZEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBhZGRJbml0aWFsUG9pbnRlck1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBncm91cCBvZiBsaXN0ZW5lcnMgdG8gZGV0ZWN0IHVzYWdlIG9mIGFueSBwb2ludGluZyBkZXZpY2VzLlxuICAgICAqIFRoZXNlIGxpc3RlbmVycyB3aWxsIGJlIGFkZGVkIHdoZW4gdGhlIHBvbHlmaWxsIGZpcnN0IGxvYWRzLCBhbmQgYW55dGltZVxuICAgICAqIHRoZSB3aW5kb3cgaXMgYmx1cnJlZCwgc28gdGhhdCB0aGV5IGFyZSBhY3RpdmUgd2hlbiB0aGUgd2luZG93IHJlZ2FpbnNcbiAgICAgKiBmb2N1cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRJbml0aWFsUG9pbnRlck1vdmVMaXN0ZW5lcnMoKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVJbml0aWFsUG9pbnRlck1vdmVMaXN0ZW5lcnMoKSB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBwb2xmeWlsbCBmaXJzdCBsb2FkcywgYXNzdW1lIHRoZSB1c2VyIGlzIGluIGtleWJvYXJkIG1vZGFsaXR5LlxuICAgICAqIElmIGFueSBldmVudCBpcyByZWNlaXZlZCBmcm9tIGEgcG9pbnRpbmcgZGV2aWNlIChlLmcuIG1vdXNlLCBwb2ludGVyLFxuICAgICAqIHRvdWNoKSwgdHVybiBvZmYga2V5Ym9hcmQgbW9kYWxpdHkuXG4gICAgICogVGhpcyBhY2NvdW50cyBmb3Igc2l0dWF0aW9ucyB3aGVyZSBmb2N1cyBlbnRlcnMgdGhlIHBhZ2UgZnJvbSB0aGUgVVJMIGJhci5cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICovXG4gICAgZnVuY3Rpb24gb25Jbml0aWFsUG9pbnRlck1vdmUoZSkge1xuICAgICAgLy8gV29yayBhcm91bmQgYSBTYWZhcmkgcXVpcmsgdGhhdCBmaXJlcyBhIG1vdXNlbW92ZSBvbiA8aHRtbD4gd2hlbmV2ZXIgdGhlXG4gICAgICAvLyB3aW5kb3cgYmx1cnMsIGV2ZW4gaWYgeW91J3JlIHRhYmJpbmcgb3V0IG9mIHRoZSBwYWdlLiDCr1xcXyjjg4QpXy/Cr1xuICAgICAgaWYgKGUudGFyZ2V0Lm5vZGVOYW1lICYmIGUudGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdodG1sJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGhhZEtleWJvYXJkRXZlbnQgPSBmYWxzZTtcbiAgICAgIHJlbW92ZUluaXRpYWxQb2ludGVyTW92ZUxpc3RlbmVycygpO1xuICAgIH1cblxuICAgIC8vIEZvciBzb21lIGtpbmRzIG9mIHN0YXRlLCB3ZSBhcmUgaW50ZXJlc3RlZCBpbiBjaGFuZ2VzIGF0IHRoZSBnbG9iYWwgc2NvcGVcbiAgICAvLyBvbmx5LiBGb3IgZXhhbXBsZSwgZ2xvYmFsIHBvaW50ZXIgaW5wdXQsIGdsb2JhbCBrZXkgcHJlc3NlcyBhbmQgZ2xvYmFsXG4gICAgLy8gdmlzaWJpbGl0eSBjaGFuZ2Ugc2hvdWxkIGFmZmVjdCB0aGUgc3RhdGUgYXQgZXZlcnkgc2NvcGU6XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93biwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIG9uVmlzaWJpbGl0eUNoYW5nZSwgdHJ1ZSk7XG5cbiAgICBhZGRJbml0aWFsUG9pbnRlck1vdmVMaXN0ZW5lcnMoKTtcblxuICAgIC8vIEZvciBmb2N1cyBhbmQgYmx1ciwgd2Ugc3BlY2lmaWNhbGx5IGNhcmUgYWJvdXQgc3RhdGUgY2hhbmdlcyBpbiB0aGUgbG9jYWxcbiAgICAvLyBzY29wZS4gVGhpcyBpcyBiZWNhdXNlIGZvY3VzIC8gYmx1ciBldmVudHMgdGhhdCBvcmlnaW5hdGUgZnJvbSB3aXRoaW4gYVxuICAgIC8vIHNoYWRvdyByb290IGFyZSBub3QgcmUtZGlzcGF0Y2hlZCBmcm9tIHRoZSBob3N0IGVsZW1lbnQgaWYgaXQgd2FzIGFscmVhZHlcbiAgICAvLyB0aGUgYWN0aXZlIGVsZW1lbnQgaW4gaXRzIG93biBzY29wZTpcbiAgICBzY29wZS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIG9uRm9jdXMsIHRydWUpO1xuICAgIHNjb3BlLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBvbkJsdXIsIHRydWUpO1xuXG4gICAgLy8gV2UgZGV0ZWN0IHRoYXQgYSBub2RlIGlzIGEgU2hhZG93Um9vdCBieSBlbnN1cmluZyB0aGF0IGl0IGlzIGFcbiAgICAvLyBEb2N1bWVudEZyYWdtZW50IGFuZCBhbHNvIGhhcyBhIGhvc3QgcHJvcGVydHkuIFRoaXMgY2hlY2sgY292ZXJzIG5hdGl2ZVxuICAgIC8vIGltcGxlbWVudGF0aW9uIGFuZCBwb2x5ZmlsbCBpbXBsZW1lbnRhdGlvbiB0cmFuc3BhcmVudGx5LiBJZiB3ZSBvbmx5IGNhcmVkXG4gICAgLy8gYWJvdXQgdGhlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiwgd2UgY291bGQganVzdCBjaGVjayBpZiB0aGUgc2NvcGUgd2FzXG4gICAgLy8gYW4gaW5zdGFuY2Ugb2YgYSBTaGFkb3dSb290LlxuICAgIGlmIChzY29wZS5ub2RlVHlwZSA9PT0gTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFICYmIHNjb3BlLmhvc3QpIHtcbiAgICAgIC8vIFNpbmNlIGEgU2hhZG93Um9vdCBpcyBhIHNwZWNpYWwga2luZCBvZiBEb2N1bWVudEZyYWdtZW50LCBpdCBkb2VzIG5vdFxuICAgICAgLy8gaGF2ZSBhIHJvb3QgZWxlbWVudCB0byBhZGQgYSBjbGFzcyB0by4gU28sIHdlIGFkZCB0aGlzIGF0dHJpYnV0ZSB0byB0aGVcbiAgICAgIC8vIGhvc3QgZWxlbWVudCBpbnN0ZWFkOlxuICAgICAgc2NvcGUuaG9zdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtanMtZm9jdXMtdmlzaWJsZScsICcnKTtcbiAgICB9IGVsc2UgaWYgKHNjb3BlLm5vZGVUeXBlID09PSBOb2RlLkRPQ1VNRU5UX05PREUpIHtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdqcy1mb2N1cy12aXNpYmxlJyk7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWpzLWZvY3VzLXZpc2libGUnLCAnJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gSXQgaXMgaW1wb3J0YW50IHRvIHdyYXAgYWxsIHJlZmVyZW5jZXMgdG8gZ2xvYmFsIHdpbmRvdyBhbmQgZG9jdW1lbnQgaW5cbiAgLy8gdGhlc2UgY2hlY2tzIHRvIHN1cHBvcnQgc2VydmVyLXNpZGUgcmVuZGVyaW5nIHVzZSBjYXNlc1xuICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL2ZvY3VzLXZpc2libGUvaXNzdWVzLzE5OVxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIE1ha2UgdGhlIHBvbHlmaWxsIGhlbHBlciBnbG9iYWxseSBhdmFpbGFibGUuIFRoaXMgY2FuIGJlIHVzZWQgYXMgYSBzaWduYWxcbiAgICAvLyB0byBpbnRlcmVzdGVkIGxpYnJhcmllcyB0aGF0IHdpc2ggdG8gY29vcmRpbmF0ZSB3aXRoIHRoZSBwb2x5ZmlsbCBmb3IgZS5nLixcbiAgICAvLyBhcHBseWluZyB0aGUgcG9seWZpbGwgdG8gYSBzaGFkb3cgcm9vdDpcbiAgICB3aW5kb3cuYXBwbHlGb2N1c1Zpc2libGVQb2x5ZmlsbCA9IGFwcGx5Rm9jdXNWaXNpYmxlUG9seWZpbGw7XG5cbiAgICAvLyBOb3RpZnkgaW50ZXJlc3RlZCBsaWJyYXJpZXMgb2YgdGhlIHBvbHlmaWxsJ3MgcHJlc2VuY2UsIGluIGNhc2UgdGhlXG4gICAgLy8gcG9seWZpbGwgd2FzIGxvYWRlZCBsYXppbHk6XG4gICAgdmFyIGV2ZW50O1xuXG4gICAgdHJ5IHtcbiAgICAgIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdmb2N1cy12aXNpYmxlLXBvbHlmaWxsLXJlYWR5Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIElFMTEgZG9lcyBub3Qgc3VwcG9ydCB1c2luZyBDdXN0b21FdmVudCBhcyBhIGNvbnN0cnVjdG9yIGRpcmVjdGx5OlxuICAgICAgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICAgIGV2ZW50LmluaXRDdXN0b21FdmVudCgnZm9jdXMtdmlzaWJsZS1wb2x5ZmlsbC1yZWFkeScsIGZhbHNlLCBmYWxzZSwge30pO1xuICAgIH1cblxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gQXBwbHkgdGhlIHBvbHlmaWxsIHRvIHRoZSBnbG9iYWwgZG9jdW1lbnQsIHNvIHRoYXQgbm8gSmF2YVNjcmlwdFxuICAgIC8vIGNvb3JkaW5hdGlvbiBpcyByZXF1aXJlZCB0byB1c2UgdGhlIHBvbHlmaWxsIGluIHRoZSB0b3AtbGV2ZWwgZG9jdW1lbnQ6XG4gICAgYXBwbHlGb2N1c1Zpc2libGVQb2x5ZmlsbChkb2N1bWVudCk7XG4gIH1cblxufSkpKTtcbiIsImNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5XG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJylcblxuY29uc3QgY2hvaWNlc0xvY2F0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nob2ljZXMtbG9jYXRpb24nKVxuY29uc3QgY2hvaWNlc0RhdGEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hvaWNlcy1kYXRhJylcbmNvbnN0IGNob2ljZXNDYXRlZ29yaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nob2ljZXMtY2F0ZWdvcmllcycpXG5cbi8vc21vb3RoIHNjcm9sbFxuXG5jb25zdCBhbmNob3JzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmKj1cIiNcIl0nKTtcblxuYW5jaG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChhbmNob3IpIHtcbiAgYW5jaG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IGJvbGNrSWQgPSBhbmNob3IuZ2V0QXR0cmlidXRlKCdocmVmJykuc3Vic3RyaW5nKDEpO1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9sY2tJZCkuc2Nyb2xsSW50b1ZpZXcoXG4gICAgICB7XG4gICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJyxcbiAgICAgICAgYmxvY2s6ICdzdGFydCcsXG4gICAgICB9XG4gICAgKTtcbiAgfSk7XG59KTtcblxuLy8g0YHQtdC70LXQutGCXG5cbmNvbnN0IGNob2ljZXMxID0gbmV3IENob2ljZXMoY2hvaWNlc0xvY2F0aW9uLCB7XG4gIHNlYXJjaEVuYWJsZWQ6IGZhbHNlLFxuICBzaG91bGRTb3J0OiBmYWxzZSxcbn0pO1xuXG4vLyDQtNGA0L7Qv9C00LDRg9C9IFwi0JrQsNGC0LXQs9C+0YDQuNC4XCJcbmNvbnN0IGNhdGVnb3JpZXNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcmllc19fY29udHJvbCcpO1xuY29uc3QgY2F0ZWdvcmllc0Ryb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGVnb3JpZXNfX2Ryb3Bkb3duJyk7XG5cbmNhdGVnb3JpZXNCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT4ge1xuICBjYXRlZ29yaWVzQnRuLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpXG5cbiAgaWYgKGNhdGVnb3JpZXNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1hY3RpdmUnKSkge1xuICAgIGNhdGVnb3JpZXNEcm9wZG93bi5jbGFzc0xpc3QuYWRkKCdpcy1vcGVuZWQnKVxuICAgIGNhdGVnb3JpZXNEcm9wZG93bi5zdHlsZS5tYXhIZWlnaHQgPSBjYXRlZ29yaWVzRHJvcGRvd24uc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xuICB9IGVsc2Uge1xuICAgIGNhdGVnb3JpZXNEcm9wZG93bi5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJylcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNhdGVnb3JpZXNEcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKCdpcy1vcGVuZWQnKTtcbiAgICB9LCA0NTApO1xuICB9XG59KVxuXG5cbi8vINGB0LLQsNC50L/QtdGAINGF0LjRgNC+XG5cbmNvbnN0IGhlcm9Td2lwZXIgPSBuZXcgU3dpcGVyKCcuaGVyby1zd2lwZXInLCB7XG4gIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICBzbGlkZXNQZXJWaWV3OiAxLFxuICBsb29wOiB0cnVlLFxuICBzcGFjZUJldHdlZW46IDEwLFxuICBwYWdpbmF0aW9uOiB7XG4gICAgZWw6ICcuaGVyby1zd2lwZXJfX3BhZ2luYXRpb24nLFxuICAgIHR5cGU6ICdidWxsZXRzJyxcbiAgICBjbGlja2FibGU6IHRydWUsXG4gIH0sXG5cbiAgYTExeToge1xuICBwcmV2U2xpZGVNZXNzYWdlOiAn0J/RgNC10LTRi9C00YPRidC40Lkg0YHQu9Cw0LnQtCcsXG4gIG5leHRTbGlkZU1lc3NhZ2U6ICfQodC70LXQtNGD0Y7RidC40Lkg0YHQu9Cw0LnQtCcsXG4gIH0sXG4gIGtleWJvYXJkOiB0cnVlLFxuXG59KTtcblxuLy8g0YHQstCw0LnQv9C10YAg0YHQv9C10YbQv9GA0LXQtNC70L7QttC10L3QuNC5XG5cbmNvbnN0IHNwZWNTd2lwZXIgPSBuZXcgU3dpcGVyKCcuc3BlY2lhbC1zd2lwZXInLCB7XG4gIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcbiAgc2xpZGVzUGVyR3JvdXA6IDMsXG4gIG5hdmlnYXRpb246IHtcbiAgICBuZXh0RWw6ICcuc3BlY2lhbF9fc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICBwcmV2RWw6ICcuc3BlY2lhbF9fc3dpcGVyLWJ1dHRvbi1wcmV2JyxcbiAgfSxcblxuICBhMTF5OiB7XG4gICAgcHJldlNsaWRlTWVzc2FnZTogJ9Cf0YDQtdC00YvQtNGD0YnQuNC1INGB0LvQsNC50LTRiycsXG4gICAgbmV4dFNsaWRlTWVzc2FnZTogJ9Ch0LvQtdC00YPRjtGJ0LjQtSDRgdC70LDQudC00YsnLFxuICB9LFxuICBrZXlib2FyZDogdHJ1ZSxcbn0pO1xuXG4vLyDRgdCy0LDQudC/0LXRgCDRgdC10LrRhtC40LggXCLQn9C+0LvQtdC30L3QvtC1XCJcblxuY29uc3QgdXNlZnVsU3dpcGVyID0gbmV3IFN3aXBlcignLnVzZWZ1bC1zd2lwZXInLCB7XG4gIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICBzbGlkZXNQZXJWaWV3OiAyLFxuICBzbGlkZXNQZXJHcm91cDogMixcbiAgc3BhY2VCZXR3ZWVuOiAzMixcbiAgc2xpZGVDbGFzczogJ3VzZWZ1bC1zd2lwZXJfX3NsaWRlJyxcbiAgbmF2aWdhdGlvbjoge1xuICAgIG5leHRFbDogJy51c2VmdWxfX3N3aXBlci1idXR0b24tbmV4dCcsXG4gICAgcHJldkVsOiAnLnVzZWZ1bF9fc3dpcGVyLWJ1dHRvbi1wcmV2JyxcbiAgfSxcblxuICBhMTF5OiB7XG4gICAgcHJldlNsaWRlTWVzc2FnZTogJ9Cf0YDQtdC00YvQtNGD0YnQuNC1INGB0LvQsNC50LTRiycsXG4gICAgbmV4dFNsaWRlTWVzc2FnZTogJ9Ch0LvQtdC00YPRjtGJ0LjQtSDRgdC70LDQudC00YsnLFxuICB9LFxuICBrZXlib2FyZDogdHJ1ZSxcbn0pO1xuXG4vLyDRgNCw0YHRh9GR0YIg0YjQuNGA0LjQvdGLINC4INC/0L7Qt9C40YbQuNC4INGB0LXRgNC+0LPQviDRhNC+0L3QsCDRhdGN0LTRjdGA0LBcblxuXG5cbmNvbnN0IHBzZXVkbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX3NlYy1tZW51JylcblxuZnVuY3Rpb24gY2FsY1N0cmlwZSgpIHtcbiAgcHNldWRvLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKVxuICBsZXQgc3RyaXBlU2hpZnQgPSAoY29udGFpbmVyLm9mZnNldFdpZHRoIC0gYm9keS5vZmZzZXRXaWR0aCkgLyAyXG4gIHBzZXVkby5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdHJpcGUtc2hpZnQnLCBgJHtzdHJpcGVTaGlmdH1weGApXG4gIHBzZXVkby5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdHJpcGUtd2lkdGgnLCBgJHtib2R5Lm9mZnNldFdpZHRofXB4YClcbn1cblxuY2FsY1N0cmlwZSgpXG5cbi8vINGA0LDRgdGH0ZHRgiDQutC+0Lst0LLQsCDQvtGC0L7QsdGA0LDQttCw0LXQvNGL0YUg0LrQsNGA0YLQvtGH0LXQuiBcItCy0YvRgdC+0LrQvtCz0L4g0YDQtdC50YLQuNC90LPQsFwiXG5jb25zdCBnb29kc0NhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJhdGVkX19saXN0LWl0ZW0nKTtcbmNvbnN0IHJhdGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmF0ZWRfX2J0bicpO1xubGV0IHBhZ2VXaWR0aCA9IGJvZHkub2Zmc2V0V2lkdGhcbmxldCBnb29kc051bWJlciA9IChwYWdlV2lkdGggPCAxMjAwKSA/IDYgOiA4O1xubGV0IGFjdHVhbGdvb2RzTnVtYmVyID0gZ29vZHNOdW1iZXI7XG5zd2l0Y2hDYXJkcyhhY3R1YWxnb29kc051bWJlcilcblxuLy8g0KHQntCR0KvQotCY0K8g0J/QoNCYINCg0JXQodCQ0JnQl9CVXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG5cbiAgY2FsY1N0cmlwZSgpXG5cbiAgcGFnZVdpZHRoID0gYm9keS5vZmZzZXRXaWR0aFxuICBjb25zb2xlLmxvZyhwYWdlV2lkdGgpXG4gIC8vINC/0LXRgNC10LrQu9GO0YfQtdC90LjQtSDQutC+0Lst0LLQsCDQvtGC0L7QsdGA0LDQttCw0LXQvNGL0YUg0LrQsNGA0YLQvtGH0LXQuiBcItCy0YvRgdC+0LrQvtCz0L4g0YDQtdC50YLQuNC90LPQsFwiXG4gIGlmICghcmF0ZUJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgZ29vZHNOdW1iZXIgPSAocGFnZVdpZHRoIDwgMTIwMCkgPyA2IDogODtcbiAgICBpZiAoZ29vZHNOdW1iZXIgIT0gYWN0dWFsZ29vZHNOdW1iZXIpIHtcbiAgICAgIGFjdHVhbGdvb2RzTnVtYmVyID0gZ29vZHNOdW1iZXI7XG4gICAgICBzd2l0Y2hDYXJkcyhhY3R1YWxnb29kc051bWJlcilcbiAgICB9XG4gIH1cblxufSk7XG5cbmZ1bmN0aW9uIHN3aXRjaENhcmRzKHdhbnRlZE51bSkge1xuXG4gIGlmICh3YW50ZWROdW0gPT0gOCkge1xuICAgIGZvciAobGV0IGkgPSA2OyBpIDwgODsgaSsrKSB7XG4gICAgICBpZiAoZ29vZHNDYXJkc1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICAgIGRpc3BsYXlCbG9jayhnb29kc0NhcmRzW2ldKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAobGV0IGkgPSB3YW50ZWROdW07IGkgPD0gZ29vZHNDYXJkcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChnb29kc0NhcmRzW2ldKSB7XG4gICAgICBpZiAoIWdvb2RzQ2FyZHNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICByZW1vdmVCbG9jayhnb29kc0NhcmRzW2ldKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkaXNwbGF5QmxvY2soYmxvY2spIHtcbiAgYmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbn1cbmZ1bmN0aW9uIHJlbW92ZUJsb2NrKGJsb2NrKSB7XG4gIGJsb2NrLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG59XG5cbi8vINC/0L7QutCw0LfQsNGC0YwgKzQg0LrQsNGA0YLQvtGH0LrQuCDRgtC+0LLQsNGA0LBcblxubGV0IGJ0blNob3dNb3JlTGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCA1OyBpKyspIHtcbiAgICBsZXQgY2FyZFRvU2hvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yYXRlZF9fbGlzdC1pdGVtLmhpZGRlbicpXG4gICAgaWYgKGNhcmRUb1Nob3cpIHtcbiAgICAgIGRpc3BsYXlCbG9jayhjYXJkVG9TaG93KVxuICAgIH0gZWxzZSB7XG4gICAgICByYXRlQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYnRuU2hvd01vcmVMaXN0ZW5lcilcbiAgICAgIHJlbW92ZUJsb2NrKHJhdGVCdG4pXG4gICAgfVxuICB9XG59XG5cbnJhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBidG5TaG93TW9yZUxpc3RlbmVyKVxuXG4vLyDQv9C+0LrQsNC30LDRgtGMINGC0YPQu9GC0LjQv1xuXG5jb25zdCB0aXBweUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWlsLXVzX190aXAtYnRuJylcblxudGlwcHlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IHtcbiAgdGlwcHlCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJylcbn0pXG5cbi8v0L3QsNGB0YLRgNC+0LnQutC4INGC0LjQv9C/0Lgt0L/QvtC00YHQutCw0LfQutC4XG50aXBweSgnLm1haWwtdXNfX3RpcC1idG4nLCB7XG4gIHRyaWdnZXI6ICdjbGljaycsXG4gIG1heFdpZHRoOiAxNTcsXG4gIGNvbnRlbnQ6ICfQoNC10L/Qu9C40YbQuNGA0L7QstCw0L3QvdGL0LUg0YEg0LfQsNGA0YPQsdC10LbQvdGL0YUg0LjRgdGC0L7Rh9C90LjQutC+0LIsINC40YHRgdC70LXQtNC+0LLQsNC90LjRjyDRhNC+0YDQvNC40YDRg9GO0YIg0LPQu9C+0LHQsNC70YzQvdGD0Y4g0YHQtdGC0YwuJyxcbn0pO1xuXG4vL9C40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC80LDRgdC60Lgg0LjQvdC/0YPRgtCwINGC0LXQu9C10YTQvtC90LBcbklucHV0bWFzayhcIis3KDk5OSktOTk5LTk5LTk5XCIpLm1hc2soZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Bob25lJykpO1xuXG4vLyDQvdCw0YHRgtGA0L7QudC60LAg0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC80YtcblxuY29uc3QgdmFsaWRMZXR0ZXJzUnUgPSAvXlvQkC3Qr9CwLdGPXSskLztcbmNvbnN0IHZhbGlkTGV0dGVyc0VuID0gL15bQS1aYS16XSskLztcblxuY29uc3QgcGhvbmVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwaG9uZScpO1xuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKTtcblxubmV3IEp1c3RWYWxpZGF0ZSgnLm1haWwtdXMtZm9ybScsIHtcbiAgY29sb3JWYWxpZDogJyNCOEVDNjQnLFxuICBjb2xvcldyb25nOiAnI0ZGNjk3MicsXG4gIHJ1bGVzOiB7XG4gICAgbmFtZToge1xuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICBtaW5MZW5ndGg6IDMsXG4gICAgICBtYXhMZW5ndGg6IDI1LFxuICAgICAgZnVuY3Rpb246ICgpID0+IHtcbiAgICAgICAgY29uc3QgdXNlck5hbWUgPSBuYW1lSW5wdXQudmFsdWU7XG4gICAgICAgIHJldHVybiB1c2VyTmFtZS5tYXRjaCh2YWxpZExldHRlcnNSdSl8fHVzZXJOYW1lLm1hdGNoKHZhbGlkTGV0dGVyc0VuKVxuICAgICAgfVxuICAgIH0sXG4gICAgcGhvbmU6IHtcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgZnVuY3Rpb246IChuYW1lLCB2YWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCB0ZWwgPSBwaG9uZUlucHV0LmlucHV0bWFzay51bm1hc2tlZHZhbHVlKClcbiAgICAgICAgcmV0dXJuIE51bWJlcih0ZWwpJiYoIHRlbC5sZW5ndGggPT09IDEwKVxuICAgICAgfVxuICAgIH0sXG4gICAgZW1haWw6IHtcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgZW1haWwsXG4gICAgfSxcbiAgICBjaGVjazoge1xuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgfSxcbiAgbWVzc2FnZXM6IHtcbiAgICBuYW1lOiB7XG4gICAgICByZXF1aXJlZDogJ9Ca0LDQuiDQstCw0YEg0LfQvtCy0YPRgj8nLFxuICAgICAgbWluTGVuZ3RoOiAn0JLQstC10LTQuNGC0LUg0LzQuNC90LjQvNGD0LwgMyDRgdC40LzQstC+0LvQsCcsXG4gICAgICBtYXhMZW5ndGg6ICfQktCy0LXQtNC40YLQtSDQvdC1INCx0L7Qu9C10LUgMjUg0YHQuNC80LLQvtC70L7QsicsXG4gICAgICBmdW5jdGlvbjogJ9CU0L7Qv9GD0YHRgtC40LzRiyDRgtC+0LvRjNC60L4g0LHRg9C60LLRiyDQutC40YDQuNC70LvQuNGG0Ysg0LjQu9C4INC70LDRgtGL0L3QuCdcbiAgICB9LFxuICAgIHBob25lOiB7XG4gICAgICByZXF1aXJlZDogJ9Cj0LrQsNC20LjRgtC1INCy0LDRiCDRgtC10LvQtdGE0L7QvScsXG4gICAgICBmdW5jdGlvbjogJ9CS0LLQtdC00LjRgtC1INC90L7QvNC10YAg0LIg0LTQtdGB0Y/RgtC40LfQvdCw0YfQvdC+0Lwg0YTQvtGA0LzQsNGC0LUnLFxuICAgIH0sXG4gICAgZW1haWw6IHtcbiAgICAgIHJlcXVpcmVkOiAn0KPQutCw0LbQuNGC0LUg0LLQsNGI0YMg0L/QvtGH0YLRgycsXG4gICAgICBlbWFpbDogJ9Cd0LXQstC10YDQvdGL0Lkg0YTQvtGA0LzQsNGCJ1xuICAgIH0sXG4gICAgY2hlY2s6IHtcbiAgICAgIHJlcXVpcmVkOiAn0J3QtdC+0LHRhdC+0LTQuNC80L4g0L/QvtC00YLQstC10YDQtNC40YLRjCcsXG4gICAgfVxuICB9LFxufSk7XG5cblxuIl19
