"use strict";var body=document.body,container=document.querySelector(".container"),burger=document.querySelector(".burger"),nav=document.querySelector(".header__menu-wrap"),header=document.querySelector(".header"),choicesLocation=document.querySelector("#choices-location"),categoriesBtn=document.querySelector(".categories__control"),categoriesDropdown=document.querySelector(".categories__dropdown"),categoriesList=document.querySelector(".categories__list"),photoBlock=document.querySelector(".photo-block"),exitBtn=document.querySelector(".close-btn"),showFormBtn=document.querySelector(".about__btn"),modalContainer=document.querySelector(".modal-container"),successModal=document.querySelector(".thank-you-message"),modalSwipersBlock=document.querySelector(".swipers-clone"),anchors=document.querySelectorAll('a[href*="#"]');anchors.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var s=e.getAttribute("href").substring(1),o=document.getElementById(s);o&&o.scrollIntoView({behavior:"smooth",block:"start"})}))}));var choices1=new Choices(choicesLocation,{searchEnabled:!1,shouldSort:!1});function dropdownAct(e,t){e.classList.toggle("is-active"),e.classList.contains("is-active")?showDropdown(t):hideDropdown(t)}function showDropdown(e){e.classList.add("is-opened"),e.style.maxHeight=e.scrollHeight+"px"}function hideDropdown(e){e.removeAttribute("style"),setTimeout((function(){e.classList.remove("is-opened")}),350)}categoriesBtn.addEventListener("click",(function(){categoriesBtn.classList.toggle("is-active"),categoriesBtn.classList.contains("is-active")?(showDropdown(categoriesDropdown),body.addEventListener("click",dropdownListener)):hideDropdown(categoriesDropdown)}));var dropdownListener=function e(t){t.target!=categoriesList&&t.target!=categoriesBtn&&(hideDropdown(categoriesDropdown),categoriesBtn.classList.remove("is-active"),body.removeEventListener("click",e))},pseudo=document.querySelector(":root");function calcStripe(){pseudo.removeAttribute("style");var e=(container.offsetWidth-body.offsetWidth)/2;pseudo.style.setProperty("--stripe-shift","".concat(e,"px")),pseudo.style.setProperty("--stripe-width","".concat(body.offsetWidth,"px"))}calcStripe(),burger.addEventListener("click",(function(){dropdownAct(burger,nav)})),nav.addEventListener("click",(function(e){(e.target.classList.contains("menu__link")||e.target.classList.contains("sec-menu__link"))&&burger.classList.contains("is-active")&&dropdownAct(burger,nav)})),window.addEventListener("resize",(function(){calcStripe(),window.innerWidth>1e3&&nav.classList.contains("is-active")&&(toggleBurgerAndMenu(),resetHeader())}));var miniSwiper=new Swiper(".tabs-swiper",{direction:"horizontal",slidesPerView:"auto",freeMode:!0,watchSlidesProgress:!0,breakpoints:{583:{direction:"vertical"},1e3:{direction:"horizontal"}}}),modalSwiperListener=function e(t){(t.target.classList.contains("close-btn")||t.target.classList.contains("modal"))&&(unblockScroll(),modalContainer.classList.remove("modal"),modalSwipersBlock.classList.remove("is-shown"),body.removeEventListener("click",e))},mainSwiper=new Swiper(".about__main-swiper",{direction:"horizontal",spaceBetween:15,thumbs:{swiper:miniSwiper},on:{click:function(){blockScroll(),modalContainer.classList.add("modal"),modalSwipersBlock.classList.add("is-shown"),body.addEventListener("click",modalSwiperListener),calcStripe()}}}),modalMiniSwiper=new Swiper(".tabs-swiper-clone",{direction:"horizontal",slidesPerView:1,spaceBetween:10,freeMode:!0,watchSlidesProgress:!0,navigation:{nextEl:".tabs-swiper-clone__swiper-button-next",prevEl:".tabs-swiper-clone__swiper-button-prev"},a11y:{prevSlideMessage:"Предыдущие слайды",nextSlideMessage:"Следующие слайды"},breakpoints:{583:{slidesPerView:2,spaceBetween:32},1e3:{slidesPerView:3,spaceBetween:78},1230:{slidesPerView:4,spaceBetween:78}}}),modalMainSwiper=new Swiper(".main-swiper-clone",{direction:"horizontal",spaceBetween:15,thumbs:{swiper:modalMiniSwiper}}),similarSwiper=new Swiper(".similar__swiper",{direction:"horizontal",navigation:{nextEl:".similar__swiper-button-next",prevEl:".similar__swiper-button-prev"},a11y:{prevSlideMessage:"Предыдущие слайды",nextSlideMessage:"Следующие слайды"},spaceBetween:16,slidesPerView:2,slidesPerGroup:2,breakpoints:{583:{slidesPerView:2,slidesPerGroup:2,spaceBetween:32},1e3:{slidesPerView:3,slidesPerGroup:3,spaceBetween:32},1230:{slidesPerView:4,slidesPerGroup:4,spaceBetween:32}},watchSlidesProgress:!0,watchSlidesVisibility:!0,slideVisibleClass:"slide-visible",on:{init:function(){this.slides.forEach((function(e){var t=e.querySelector(".btn");e.classList.contains("slide-visible")?t.tabIndex="":t.tabIndex="-1"}))},slideChange:function(){this.slides.forEach((function(e){var t=e.querySelector(".btn");e.classList.contains("slide-visible")?t.tabIndex="":t.tabIndex="-1"}))}}});function blockScroll(){var e=window.innerWidth-body.offsetWidth+"px";body.style.paddingRight=e,body.classList.add("overlay")}function unblockScroll(){body.classList.remove("overlay"),body.removeAttribute("style")}var validLettersRu=/^[А-Яа-я]+$/,validLettersEn=/^[A-Za-z]+$/,form=document.querySelector(".mail-us-form"),phoneInput=document.querySelector("#phone"),nameInput=document.querySelector("#name");Inputmask("+7(999)-999-99-99").mask(phoneInput);var validation=new window.JustValidate(form,{focusInvalidField:!0,successFieldCssClass:"valid-field",errorFieldCssClass:"invalid-field",errorLabelStyle:{color:"#FF6972"}}),formListener=function e(t){(t.target.classList.contains("close-btn")||t.target.classList.contains("modal"))&&(unblockScroll(),modalContainer.classList.remove("modal"),form.classList.remove("is-shown"),body.removeEventListener("click",e))};showFormBtn.addEventListener("click",(function(){blockScroll(),modalContainer.classList.add("modal"),form.classList.add("is-shown"),body.addEventListener("click",formListener)}));var successModalListener=function e(t){(t.target.classList.contains("close-btn")||t.target.classList.contains("modal"))&&(unblockScroll(),modalContainer.classList.remove("modal"),successModal.classList.remove("is-shown"),body.removeEventListener("click",e))};validation.addField("#name",[{rule:"minLength",value:3,errorMessage:"Введите минимум 3 символа"},{rule:"maxLength",value:25,errorMessage:"Введите не более 25 символов"},{rule:"required",value:!0,errorMessage:"Как вас зовут?"},{rule:"function",validator:function(){var e=nameInput.value;return!(!e.match(validLettersRu)&&!e.match(validLettersEn))},errorMessage:"Допустимы только буквы кириллицы или латыни"}]).addField("#phone",[{rule:"required",value:!0,errorMessage:"Укажите ваш телефон"},{rule:"function",validator:function(){return 10===phoneInput.inputmask.unmaskedvalue().length},errorMessage:"Введите корректный телефон"}]).addField("#check",[{rule:"required",value:!0,errorMessage:"Необходимо подтвердить"}]).onSuccess((function(e){console.log("Validation passes and form submitted");var t=new FormData(e.target),s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&200===s.status&&(form.classList.remove("is-shown"),body.removeEventListener("click",formListener),successModal.classList.add("is-shown"),body.addEventListener("click",successModalListener))},s.open("POST","mail.php",!0),s.send(t),e.target.reset()}));var swipersZoomListener=function e(t){(t.target==body||t.target.classList.contains("close-btn"))&&(unblockScroll(),photoBlock.classList.remove("modal","container","popup"),calcStripe(),body.removeEventListener("click",e))};